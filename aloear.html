<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Apothecary AR</title>
    <!-- A-Frame core lib -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <!-- AR.js library for A-Frame -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@5.1.2/files/dist/aframe-animation-component.js"></script>

    <style>

      #back, #hint {
        z-index: 9999;
        pointer-events: auto;
      }

      a-scene, a-scene canvas {
        position: relative;
        z-index: 1;
      }
    </style>

  </head>
  <body style="margin: 0; overflow: hidden">
    <a href="index.html" style="text-decoration: none;"><div id="back" style="position: fixed;
        top: 0.75rem;
        left: 0.75rem;
        background: rgba(255, 255, 255, 0.85);
        color: #333;
        border: none;
        border-radius: 6px;
        padding: 0.4rem 0.7rem;
        font-weight: 700;
        font-size: 0.9rem;
        text-decoration: none;
        z-index: 10;
        font-family: 'Lato', sans-serif;">&larr;&nbsp;Back</div></a>
    <div id="hint" style="position: fixed;
        bottom: 1rem;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.85);
        color: #333;
        border-radius: 6px;
        padding: 0.4rem 0.7rem;
        font-size: 0.9rem;
        z-index: 10;
        max-width: 90%;
        text-align: center;
        font-family: 'Lato', sans-serif;">
  Point your camera at the printed marker
    </div>
    <!-- AR scene -->
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false" vr-mode-ui="enabled: false;">
        <!-- point light -->
        <a-entity light="type: point; intensity: 1.2; decay: 2" position="2 4 2"></a-entity>
        <!-- ambient light -->
        <a-entity light="type: ambient; intensity: 0.3"></a-entity>

        <a-marker preset="hiro">
            <!-- metal box
            <a-box 
            position="0 0.5 0"
            width="1" height="1" depth="1"
            color="#ffffff"
            shader="standard"
            metalness="0.6"
            roughness="0.1">
            </a-box> -->

            <a-entity
            gltf-model="./aloe_plant/scene.gltf"
            scale="0.5 0.5 0.5"
            position="0 0.5 0"
            animation="property: rotation; easing: linear; dur: 6000; to: 0 360 0; loop: true;"
            ></a-entity>
            <a-entity 
                position="0 1.5 0" 
                scale="4 4 4" 
                text="value: Aloe Plant; font: dejavu; align: center; color: rgb(67, 67, 67) side: double">
            </a-entity>


            <a-entity
            gltf-model="./aloe_gel/scene.gltf"
            scale="0.0125 0.0125 0.0125"
            position="1.5 0.75 0"
            rotation="40 0 0"
            animation="property: rotation; easing: linear; dur: 6000; to: 40 360 0; loop: true;"
            ></a-entity>
            <a-entity 
                position="1.5 1.5 0" 
                scale="4 4 4" 
                text="value: Aloe Gel; font: dejavu; align: center; color: rgb(67, 67, 67); side: double">
            </a-entity>
        </a-marker>

        <a-marker preset="kanji">
            <!-- metal sphere
            <a-entity
            geometry="primitive: sphere; radius: 0.5"
            position="0 0.5 0"
            material="color: #ff4f4f; shader: standard; metalness: 0.8; roughness: 0.2">
            </a-entity> -->
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
    const hint = document.getElementById('hint');
        document.querySelectorAll('a-marker').forEach(marker => {
            marker.addEventListener('markerFound', () => hint.style.display = 'none');
            marker.addEventListener('markerLost', () => hint.style.display = 'flex');
        });
    </script>

  </body>
</html>
